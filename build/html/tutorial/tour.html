

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.3. 快速开始 &mdash; buildbot-translate 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.4. Further Reading" href="further.html" />
    <link rel="prev" title="1.2. 用Docker启动BuildBot" href="docker.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> buildbot-translate
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Buildbot Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="firstrun.html">1.1. 第一次启动</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">1.2. 用Docker启动BuildBot</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.3. 快速开始</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">1.3.1. 目标</a></li>
<li class="toctree-l3"><a class="reference internal" href="#url">1.3.2. 设置项目的名字和URL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">1.3.3. 配置错误</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">1.3.4. 你的第一次构建</a></li>
<li class="toctree-l3"><a class="reference internal" href="#irc">1.3.5. 激活IRC机器人</a></li>
<li class="toctree-l3"><a class="reference internal" href="#web">1.3.6. 设置web用户权限</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-with-manhole">1.3.7. Debugging with Manhole</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-try-scheduler">1.3.8. Adding a ‘try’ scheduler</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="further.html">1.4. Further Reading</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">buildbot-translate</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">1. </span>Buildbot Tutorial</a> &raquo;</li>
        
      <li><span class="section-number">1.3. </span>快速开始</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorial/tour.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-tour-label">
<span id="id1"></span><h1><span class="section-number">1.3. </span>快速开始<a class="headerlink" href="#quick-tour-label" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2><span class="section-number">1.3.1. </span>目标<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>This tutorial will expand on the <a class="reference internal" href="firstrun.html#first-run-label"><span class="std std-ref">第一次启动</span></a> tutorial by taking a quick tour around some of the features of buildbot that are hinted at in the comments in the sample configuration.
We will simply change parts of the default configuration and explain the activated features.</p>
<p>通过快速浏览示例配置注释中所提示的buildbot的某些功能，本教程将在 :ref:<a href="#id3"><span class="problematic" id="id4">`</span></a>首次运行`教程的基础上进行扩展。
我们将仅更改默认配置的一部分并解释激活的功能。</p>
<p>作为本教程的一部分，我们将使用buildbot进行一些实际上的构建</p>
<p>这个章节中，我们将教你</p>
<ul class="simple">
<li><p>简单改变一些配置并激活他们</p></li>
<li><p>处理一些配置上的错误</p></li>
<li><p>强行构建</p></li>
<li><p>使用并且控制IRC机器人</p></li>
<li><p>通过ssh debug</p></li>
<li><p>给调度器增加个 <cite>try</cite></p></li>
</ul>
</div>
<div class="section" id="url">
<h2><span class="section-number">1.3.2. </span>设置项目的名字和URL<a class="headerlink" href="#url" title="Permalink to this headline">¶</a></h2>
<p>让我们从简单的位置开始，看看您将在哪里自定义buildbot的项目名称和URL。</p>
<p>我们从:ref:<a href="#id5"><span class="problematic" id="id6">`</span></a>first-run-label`教程继续</p>
<p>打开一个终端，进入你刚才创建的master目录，激活虚拟环境，然后打开master的配置进行编辑</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/tmp/bb-master
<span class="nb">source</span> sandbox/bin/activate
<span class="nv">$EDITOR</span> master/master.cfg
</pre></div>
</div>
<p>现在，查找被标记为 <em>PROJECT IDENTITY</em> 部分写了什么:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">####### PROJECT IDENTITY</span>

<span class="c1"># &#39;title&#39;字符串将出现在buildbot安装目录的顶部.</span>

<span class="n">c</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Hello World CI&quot;</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;titleURL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;https://buildbot.github.io/hello-world/&quot;</span>
</pre></div>
</div>
<p>你可以随意更改这些链接，如果你想看一下你改动了之后会发生什么</p>
<p>更改之后，进入终端，然后输入</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>buildbot reconfig master
</pre></div>
</div>
<p>你会在master日志中看到几行比较少的输出，像下面这样</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2011-12-04 10:11:09-0600 [-] loading configuration from /path/to/buildbot/master.cfg
2011-12-04 10:11:09-0600 [-] configuration update started
2011-12-04 10:11:09-0600 [-] builder runtests is unchanged
2011-12-04 10:11:09-0600 [-] removing IStatusReceiver &lt;...&gt;
2011-12-04 10:11:09-0600 [-] (TCP Port 8010 Closed)
2011-12-04 10:11:09-0600 [-] Stopping factory &lt;...&gt;
2011-12-04 10:11:09-0600 [-] adding IStatusReceiver &lt;...&gt;
2011-12-04 10:11:09-0600 [-] RotateLogSite starting on 8010
2011-12-04 10:11:09-0600 [-] Starting factory &lt;...&gt;
2011-12-04 10:11:09-0600 [-] Setting up http.log rotating 10 files of 10000000 bytes each
2011-12-04 10:11:09-0600 [-] WebStatus using (/path/to/buildbot/public_html)
2011-12-04 10:11:09-0600 [-] removing 0 old schedulers, updating 0, and adding 0
2011-12-04 10:11:09-0600 [-] adding 1 new changesources, removing 1
2011-12-04 10:11:09-0600 [-] gitpoller: using workdir &#39;/path/to/buildbot/gitpoller-workdir&#39;
2011-12-04 10:11:09-0600 [-] GitPoller repository already exists
2011-12-04 10:11:09-0600 [-] configuration update complete

Reconfiguration appears to have completed successfully.
</pre></div>
</div>
<p>重要的几行是告诉您它正在顶部加载新配置，而底部的行则表明更新已完成。</p>
<p>现在如果你回到 <a class="reference external" href="http://localhost:8010/#/waterfall">the waterfall page</a> 您会看到该项目的名称就是您可能要更改的名称，当您单击页面底部的项目名称的URL时，它应该带您进入配置中的链接。</p>
</div>
<div class="section" id="id7">
<h2><span class="section-number">1.3.3. </span>配置错误<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>配置buildbot出错是很常见的，所以你可以看下这个案例中发生了什么以及你该怎么处理错误</p>
<p>再次打开配置，并通过删除更改的两行中的第一个单引号来引入语法错误，因此它们显示为：，</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>c[title&#39;] = &quot;Hello World CI&quot;
c[titleURL&#39;] = &quot;https://buildbot.github.io/hello-world/&quot;
</pre></div>
</div>
<p>This creates a Python <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>.</p>
<p>现在回去更新buildmaster的配置</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>buildbot reconfig master
</pre></div>
</div>
<p>这次，输出是这个样子的:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2015-08-14 18:40:46+0000 [-] beginning configuration update
2015-08-14 18:40:46+0000 [-] Loading configuration from &#39;/data/buildbot/master/master.cfg&#39;
2015-08-14 18:40:46+0000 [-] error while parsing config file:
        Traceback (most recent call last):
          File &quot;/usr/local/lib/python2.7/dist-packages/buildbot/master.py&quot;, line 265, in reconfig
            d = self.doReconfig()
          File &quot;/usr/local/lib/python2.7/dist-packages/twisted/internet/defer.py&quot;, line 1274, in unwindGenerator
            return _inlineCallbacks(None, gen, Deferred())
          File &quot;/usr/local/lib/python2.7/dist-packages/twisted/internet/defer.py&quot;, line 1128, in _inlineCallbacks
            result = g.send(result)
          File &quot;/usr/local/lib/python2.7/dist-packages/buildbot/master.py&quot;, line 289, in doReconfig
            self.configFileName)
        --- &lt;exception caught here&gt; ---
          File &quot;/usr/local/lib/python2.7/dist-packages/buildbot/config.py&quot;, line 156, in loadConfig
            exec f in localDict
        exceptions.SyntaxError: EOL while scanning string literal (master.cfg, line 103)

2015-08-14 18:40:46+0000 [-] error while parsing config file: EOL while scanning string literal (master.cfg, line 103) (traceback in logfile)
2015-08-14 18:40:46+0000 [-] reconfig aborted without making any changes

Reconfiguration failed. Please inspect the master.cfg file for errors,
correct them, then try &#39;buildbot reconfig&#39; again.
</pre></div>
</div>
<p>这次，明确的说有一个错误在配置中。幸运的是，buildbot master 会忽略这个配置错误，并且会继续使用以前的配置运行</p>
<p>这个消息够清楚了，所以，重新打开配置，处理这个错误，然后更新master的配置</p>
</div>
<div class="section" id="id8">
<h2><span class="section-number">1.3.4. </span>你的第一次构建<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>By now you’re probably thinking: “All this time spent and still not done a single build? What was the name of this project again?”
现在你可能会想，花了这么多时间还没执行完一次构建，这个项目叫什么？</p>
<p>在 <a class="reference external" href="http://localhost:8010/#/builders">Builders</a> 页面, 点击runtests连接</p>
<p>You’ll see a builder page, and a blue “force” button that will bring up the
following dialog box:
你将看到一个builder page 页面，有一个蓝色 “force” 按钮， 淡季后将会弹出下面的对话框</p>
<img alt="force a build." src="../_images/force-build.png" />
<p>点击 <em>Start Build</em> - 这次不需要填写任何东西
下一步，点击 <a class="reference external" href="http://localhost:8010/#/waterfall?show=runtests">view in waterfall</a>.</p>
<p>你会看到:</p>
<img alt="an successful test run happened." src="../_images/runtests-success.png" />
</div>
<div class="section" id="irc">
<h2><span class="section-number">1.3.5. </span>激活IRC机器人<a class="headerlink" href="#irc" title="Permalink to this headline">¶</a></h2>
<p>buildbot 包括一个IRC机器人，你可以加入一个频道，然后了解buildbot的运行状态</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>安全须知</p>
</div>
<p>请注意，任何有权访问您的irc频道或可以将私人消息发送给该漫游器的用户都可以创建或停止build <a href="#id9"><span class="problematic" id="id10">:bug:`3377`</span></a>.</p>
<p>第一步，启动一个IRC客户端，连接irc.freenode.net  然后加入一个空的频道
在这个样例中，我们使用 <code class="docutils literal notranslate"><span class="pre">#buildbot-test</span></code> ,所以，加入这个频道（注意，请不要加入buildbot主频道</p>
<p>编辑 <code class="file docutils literal notranslate"><span class="pre">master.cfg</span></code> 然后找到 <em>BUILDBOT SERVICES</em> 部分.
在这一章节的最后添加一行:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;services&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reporters</span><span class="o">.</span><span class="n">IRC</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;irc.freenode.net&quot;</span><span class="p">,</span> <span class="n">nick</span><span class="o">=</span><span class="s2">&quot;bbtest&quot;</span><span class="p">,</span>
                                   <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#buildbot-test&quot;</span><span class="p">]))</span>
</pre></div>
</div>
<p>重新配置build master的配置然后做如下操作:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grep -i irc master/twistd.log
</pre></div>
</div>
<p>输出的日志应该包含下面这一行:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2016-11-13 15:53:06+0100 [-] Starting factory &lt;...&gt;
2016-11-13 15:53:19+0100 [IrcStatusBot,client] &lt;...&gt;: I have joined #buildbot-test
</pre></div>
</div>
<p>加入IRC频道看一下bot输出了什么.
在你的IRC频道中输入:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>bbtest: commands
</pre></div>
</div>
<p>获取bot能支持的命令列表.</p>
<p>让我们告诉漫游器通知某些事件，以了解我们可以通知哪些事件:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>bbtest: help notify
</pre></div>
</div>
<p>现在让我们看一些事件通知:</p>
<div class="highlight-irc notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;@lsblakk&gt; </span><span class="na">bbtest:</span> notify on started finished failure
<span class="nt">&lt; bbtest&gt; </span>The following events are being notified: [&#39;started&#39;, &#39;failure&#39;, &#39;finished&#39;]
</pre></div>
</div>
<p>现在，返回Web界面并强制进行另一个构建。
或者，要求机器人强制构建：</p>
<div class="highlight-irc notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;@lsblakk&gt; </span><span class="na">bbtest:</span> force build --codebase= runtests
<span class="nt">&lt; bbtest&gt; </span>build #1 of runtests started
<span class="nt">&lt; bbtest&gt; </span>Hey! build runtests #1 is complete: Success [finished]
</pre></div>
</div>
<p>你可以在web界面上看到一个新的构建</p>
<img alt="a successful test run from IRC happened." src="../_images/irc-testrun.png" />
<p>完整的文档可从以这里查看： <a href="#id11"><span class="problematic" id="id12">:bb:reporter:`IRC`</span></a>.</p>
</div>
<div class="section" id="web">
<h2><span class="section-number">1.3.6. </span>设置web用户权限<a class="headerlink" href="#web" title="Permalink to this headline">¶</a></h2>
<p>The default configuration allows everyone to perform any task like creating or stopping builds via the web interface. To restrict this to a user, look for::
默认配置允许所有人通过web界面执行任何任务，像创建或者停止构建，</p>
<blockquote>
<div><dl class="simple">
<dt>c[‘www’] = dict(port=8010,</dt><dd><p>plugins=dict(waterfall_view={}, console_view={}))</p>
</dd>
</dl>
</div></blockquote>
<p>and append:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">][</span><span class="s1">&#39;authz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">Authz</span><span class="p">(</span>
        <span class="n">allowRules</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">util</span><span class="o">.</span><span class="n">AnyEndpointMatcher</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s2">&quot;admins&quot;</span><span class="p">)</span>
        <span class="p">],</span>
        <span class="n">roleMatchers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">util</span><span class="o">.</span><span class="n">RolesFromUsername</span><span class="p">(</span><span class="n">roles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;admins&#39;</span><span class="p">],</span> <span class="n">usernames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Alice&#39;</span><span class="p">])</span>
        <span class="p">]</span>
<span class="p">)</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;www&#39;</span><span class="p">][</span><span class="s1">&#39;auth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">UserPasswordAuth</span><span class="p">([(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span><span class="s1">&#39;Password1&#39;</span><span class="p">)])</span>
</pre></div>
</div>
<p>For more details, see <a class="reference internal" href="../manual/configuration/www.html#web-authentication"><span class="std std-ref">Authentication plugins</span></a>.</p>
</div>
<div class="section" id="debugging-with-manhole">
<h2><span class="section-number">1.3.7. </span>Debugging with Manhole<a class="headerlink" href="#debugging-with-manhole" title="Permalink to this headline">¶</a></h2>
<p>You can do some debugging by using manhole, an interactive Python shell.
It exposes full access to the buildmaster’s account (including the ability to modify and delete files), so it should not be enabled with a weak or easily guessable password.</p>
<p>To use this you will need to install an additional package or two to your virtualenv:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/tmp/bb-master
<span class="nb">source</span> sandbox/bin/activate
pip install -U pip
pip install cryptography pyasn1
</pre></div>
</div>
<p>You will also need to generate an SSH host key for the Manhole server.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p /data/ssh_host_keys
ckeygen -t rsa -f /data/ssh_host_keys/ssh_host_rsa_key
</pre></div>
</div>
<p>In your master.cfg find:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">BuildmasterConfig</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
<p>Insert the following to enable debugging mode with manhole:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">####### DEBUGGING</span>
<span class="kn">from</span> <span class="nn">buildbot</span> <span class="k">import</span> <span class="n">manhole</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;manhole&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">manhole</span><span class="o">.</span><span class="n">PasswordManhole</span><span class="p">(</span><span class="s2">&quot;tcp:1234:interface=127.0.0.1&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;passwd&quot;</span><span class="p">,</span>
                                       <span class="n">ssh_hostkey_dir</span><span class="o">=</span><span class="s2">&quot;/data/ssh_host_keys/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>After restarting the master, you can ssh into the master and get an interactive Python shell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -p1234 admin@127.0.0.1
<span class="c1"># enter passwd at prompt</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The pyasn1-0.1.1 release has a bug which results in an exception similar to
this on startup:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>exceptions.TypeError: argument 2 must be long, not int
</pre></div>
</div>
<p>If you see this, the temporary solution is to install the previous version
of pyasn1:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install pyasn1-0.0.13b
</pre></div>
</div>
</div>
<p>If you wanted to check which workers are connected and what builders those workers are assigned to you could do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">master</span><span class="o">.</span><span class="n">workers</span><span class="o">.</span><span class="n">workers</span>
<span class="go">{&#39;example-worker&#39;: &lt;Worker &#39;example-worker&#39;, current builders: runtests&gt;}</span>
</pre></div>
</div>
<p>Objects can be explored in more depth using <cite>dir(x)</cite> or the helper function <cite>show(x)</cite>.</p>
</div>
<div class="section" id="adding-a-try-scheduler">
<h2><span class="section-number">1.3.8. </span>Adding a ‘try’ scheduler<a class="headerlink" href="#adding-a-try-scheduler" title="Permalink to this headline">¶</a></h2>
<p>Buildbot includes a way for developers to submit patches for testing without committing them to the source code control system.
(This is really handy for projects that support several operating systems or architectures.)</p>
<p>To set this up, add the following lines to master.cfg:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">buildbot.scheduler</span> <span class="k">import</span> <span class="n">Try_Userpass</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;schedulers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">c</span><span class="p">[</span><span class="s1">&#39;schedulers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Try_Userpass</span><span class="p">(</span>
                                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;try&#39;</span><span class="p">,</span>
                                    <span class="n">builderNames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;runtests&#39;</span><span class="p">],</span>
                                    <span class="n">port</span><span class="o">=</span><span class="mi">5555</span><span class="p">,</span>
                                    <span class="n">userpass</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;sampleuser&#39;</span><span class="p">,</span><span class="s1">&#39;samplepass&#39;</span><span class="p">)]))</span>
</pre></div>
</div>
<p>Then you can submit changes using the <a href="#id13"><span class="problematic" id="id14">:bb:cmdline:`try`</span></a> command.</p>
<p>Let’s try this out by making a one-line change to hello-world, say, to make it trace the tree by default:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/buildbot/hello-world.git hello-world-git
<span class="nb">cd</span> hello-world-git/hello
<span class="nv">$EDITOR</span> __init__.py
<span class="c1"># change &#39;return &quot;hello &quot; + who&#39; on line 6 to &#39;return &quot;greets &quot; + who&#39;</span>
</pre></div>
</div>
<p>Then run buildbot’s <code class="docutils literal notranslate"><span class="pre">try</span></code> command as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/tmp/bb-master
<span class="nb">source</span> sandbox/bin/activate
buildbot try --connect<span class="o">=</span>pb --master<span class="o">=</span><span class="m">127</span>.0.0.1:5555 <span class="se">\</span>
    --username<span class="o">=</span>sampleuser --passwd<span class="o">=</span>samplepass --vc<span class="o">=</span>git
</pre></div>
</div>
<p>This will do <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> for you and send the resulting patch to the server for build and test against the latest sources from Git.</p>
<p>Now go back to the <a class="reference external" href="http://localhost:8010/#/waterfall">waterfall</a> page, click on the runtests link, and scroll down.
You should see that another build has been started with your change (and stdout for the tests should be chock-full of parse trees as a result).
The “Reason” for the job will be listed as “‘try’ job”, and the blamelist will be empty.</p>
<p>To make yourself show up as the author of the change, use the <code class="docutils literal notranslate"><span class="pre">--who=emailaddr</span></code> option on <code class="docutils literal notranslate"><span class="pre">buildbot</span> <span class="pre">try</span></code> to pass your email address.</p>
<p>To make a description of the change show up, use the <code class="docutils literal notranslate"><span class="pre">--properties=comment=&quot;this</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">comment&quot;</span></code> option on <code class="docutils literal notranslate"><span class="pre">buildbot</span> <span class="pre">try</span></code>.</p>
<p>To use ssh instead of a private username/password database, see <a href="#id15"><span class="problematic" id="id16">:bb:sched:`Try_Jobdir`</span></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="further.html" class="btn btn-neutral float-right" title="1.4. Further Reading" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="docker.html" class="btn btn-neutral float-left" title="1.2. 用Docker启动BuildBot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, junpengxu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>