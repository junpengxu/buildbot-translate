

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>REST API &mdash; buildbot-translate 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> buildbot-translate
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">buildbot-translate</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>REST API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/rest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rest-api">
<span id="id1"></span><h1>REST API<a class="headerlink" href="#rest-api" title="Permalink to this headline">¶</a></h1>
<p>The REST API is a public interface which can be used by external code to control Buildbot.
Internally, the REST API a thin wrapper around the data API’s “Getter” and “Control” sections.
It is also designed, in keeping with REST principles, to be discoverable.
As such, the details of the paths and resources are not documented here.
Begin at the root URL, and see the <a class="reference internal" href="data.html#data-api"><span class="std std-ref">Data API</span></a> documentation for more information.</p>
<p>The precise specifications in RAML format are described in <a class="reference internal" href="raml/index.html#rest-api-specs"><span class="std std-ref">REST API Specification</span></a> documentation.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#versions" id="id3">Versions</a></p></li>
<li><p><a class="reference internal" href="#getting" id="id4">Getting</a></p></li>
<li><p><a class="reference internal" href="#collections" id="id5">Collections</a></p>
<ul>
<li><p><a class="reference internal" href="#field-selection" id="id6">Field Selection</a></p></li>
<li><p><a class="reference internal" href="#filtering" id="id7">Filtering</a></p></li>
<li><p><a class="reference internal" href="#sorting" id="id8">Sorting</a></p></li>
<li><p><a class="reference internal" href="#pagination" id="id9">Pagination</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#controlling" id="id10">Controlling</a></p></li>
<li><p><a class="reference internal" href="#authentication" id="id11">Authentication</a></p></li>
</ul>
</div>
<div class="section" id="versions">
<h2><a class="toc-backref" href="#id3">Versions</a><a class="headerlink" href="#versions" title="Permalink to this headline">¶</a></h2>
<p>The API described here is version 2.
The ad-hoc API from Buildbot-0.8.x, version 1, is no longer supported <a class="footnote-reference brackets" href="#apiv1" id="id2">1</a>.</p>
<p>The policy for incrementing the version is when there is incompatible change added.
Removing a field or endpoint is considered incompatible change.
Adding a field or endpoint is not considered incompatible, and thus will only be described as a change in release note.
The policy is that we will avoid as much as possible incrementing version.</p>
<dl class="footnote brackets">
<dt class="label" id="apiv1"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>The JSON API defined by <code class="docutils literal notranslate"><span class="pre">status_json.py</span></code> in Buildbot-0.8.x is considered version 1, although its root path was <code class="docutils literal notranslate"><span class="pre">json</span></code>, not <code class="docutils literal notranslate"><span class="pre">api/v1</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="getting">
<h2><a class="toc-backref" href="#id4">Getting</a><a class="headerlink" href="#getting" title="Permalink to this headline">¶</a></h2>
<p>To get data, issue a GET request to the appropriate path.
For example, with a base URL of <code class="docutils literal notranslate"><span class="pre">http://build.example.org/buildbot</span></code>, the list of masters for builder 9 is available at <code class="docutils literal notranslate"><span class="pre">http://build.example.org/buildbot/api/v2/builder/9/master</span></code>.</p>
</div>
<div class="section" id="collections">
<h2><a class="toc-backref" href="#id5">Collections</a><a class="headerlink" href="#collections" title="Permalink to this headline">¶</a></h2>
<p>Results are formatted in keeping with the <a class="reference external" href="http://jsonapi.org/">JSON API</a> specification.
The top level of every response is an object.
Its keys are the plural names of the resource types, and the values are lists of objects, even for a single-resource request.
For example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;total&quot;</span><span class="p">:</span> <span class="mi">2</span>
  <span class="p">},</span>
  <span class="nt">&quot;schedulers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;master&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;smoketest&quot;</span><span class="p">,</span>
      <span class="nt">&quot;schedulerid&quot;</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;master&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;last_active&quot;</span><span class="p">:</span> <span class="mi">1369604067</span><span class="p">,</span>
        <span class="nt">&quot;link&quot;</span><span class="p">:</span> <span class="s2">&quot;http://build.example.org/api/v2/master/1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;masterid&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;master3:/BB/master&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;goaheadtryme&quot;</span><span class="p">,</span>
      <span class="nt">&quot;schedulerid&quot;</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A response may optionally contain extra, related resources beyond those requested.
The <code class="docutils literal notranslate"><span class="pre">meta</span></code> key contains metadata about the response, including the total count of resources in a collection.</p>
<p>Several query parameters may be used to affect the results of a request.
These parameters are applied in the order described (so, it is not possible to sort on a field that is not selected, for example).</p>
<div class="section" id="field-selection">
<h3><a class="toc-backref" href="#id6">Field Selection</a><a class="headerlink" href="#field-selection" title="Permalink to this headline">¶</a></h3>
<p>If only certain fields of each resource are required, the <code class="docutils literal notranslate"><span class="pre">field</span></code> query parameter can be used to select them.
For example, the following will select just the names and id’s of all schedulers:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">http://build.example.org/api/v2/scheduler?field=name&amp;field=schedulerid</span></code></p></li>
</ul>
<p>Field selection can be used for either detail (single-entity) or collection (multi-entity) requests.
The remaining options only apply to collection requests.</p>
</div>
<div class="section" id="filtering">
<h3><a class="toc-backref" href="#id7">Filtering</a><a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
<p>Collection responses may be filtered on any simple top-level field.</p>
<p>To select records with a specific value use the query parameter <code class="docutils literal notranslate"><span class="pre">{field}={value}</span></code>.
For example, <code class="docutils literal notranslate"><span class="pre">http://build.example.org/api/v2/scheduler?name=smoketest</span></code> selects the scheduler named “smoketest”.</p>
<p>Filters can use any of the operators listed below, with query parameters of the form <code class="docutils literal notranslate"><span class="pre">{field}__{operator}={value}</span></code>.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">eq</span></code></dt><dd><p>equality, or with the same parameter appearing multiple times, equality with one of the given values (so <cite>foo__eq=x&amp;foo__eq=y</cite> would match resources where foo is <cite>x</cite> or <cite>y</cite>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ne</span></code></dt><dd><p>inequality, or set exclusion</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lt</span></code></dt><dd><p>select resources where the field’s value is less than <code class="docutils literal notranslate"><span class="pre">{value}</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">le</span></code></dt><dd><p>select resources where the field’s value is less than or equal to <code class="docutils literal notranslate"><span class="pre">{value}</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">gt</span></code></dt><dd><p>select resources where the field’s value is greater than <code class="docutils literal notranslate"><span class="pre">{value}</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ge</span></code></dt><dd><p>select resources where the field’s value is greater than or equal to <code class="docutils literal notranslate"><span class="pre">{value}</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">contains</span></code></dt><dd><p>Select resources where the field’s value contains <code class="docutils literal notranslate"><span class="pre">{value}</span></code>.
If the parameter is provided multiple times, results containing at least one of the values are returned (so <cite>foo__contains=x&amp;foo__contains=y</cite> would match resources where foo contains <cite>x</cite>, <cite>y</cite> or both).</p>
</dd>
</dl>
<p>For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">http://build.example.org/api/v2/builder?name__lt=cccc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http://build.example.org/api/v2/buildsets?complete__eq=false</span></code></p></li>
</ul>
<p>Boolean values can be given as <code class="docutils literal notranslate"><span class="pre">on</span></code>/<code class="docutils literal notranslate"><span class="pre">off</span></code>, <code class="docutils literal notranslate"><span class="pre">true</span></code>/<code class="docutils literal notranslate"><span class="pre">false</span></code>, <code class="docutils literal notranslate"><span class="pre">yes</span></code>/<code class="docutils literal notranslate"><span class="pre">no</span></code>, or <code class="docutils literal notranslate"><span class="pre">1</span></code>/<code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</div>
<div class="section" id="sorting">
<h3><a class="toc-backref" href="#id8">Sorting</a><a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h3>
<p>Collection responses may be ordered with the <code class="docutils literal notranslate"><span class="pre">order</span></code> query parameter.
This parameter takes a field name to sort on, optionally prefixed with <code class="docutils literal notranslate"><span class="pre">-</span></code> to reverse the sort.
The parameter can appear multiple times, and will be sorted lexically with the fields arranged in the given order.
For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">http://build.example.org/api/v2/buildrequest?order=builderid&amp;order=buildrequestid</span></code></p></li>
</ul>
</div>
<div class="section" id="pagination">
<h3><a class="toc-backref" href="#id9">Pagination</a><a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h3>
<p>Collection responses may be paginated with the <code class="docutils literal notranslate"><span class="pre">offset</span></code> and <code class="docutils literal notranslate"><span class="pre">limit</span></code> query parameters.
The offset is the 0-based index of the first result to included, after filtering and sorting.
The limit is the maximum number of results to return.
Some resource types may impose a maximum on the limit parameter; be sure to check the resulting links to determine whether further data is available.
For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">http://build.example.org/api/v2/buildrequest?order=builderid&amp;limit=10</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http://build.example.org/api/v2/buildrequest?order=builderid&amp;offset=20&amp;limit=10</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="controlling">
<h2><a class="toc-backref" href="#id10">Controlling</a><a class="headerlink" href="#controlling" title="Permalink to this headline">¶</a></h2>
<p>Data API control operations are handled by POST requests using a simplified form of <a class="reference external" href="http://www.jsonrpc.org/specification">JSONRPC 2.0</a>.
The JSONRPC “method” is mapped to the data API “action”, and the parameters are passed to that application.</p>
<p>The following parts of the protocol are not supported:</p>
<ul class="simple">
<li><p>positional parameters</p></li>
<li><p>batch requests</p></li>
</ul>
<p>Requests are sent as an HTTP POST, containing the request JSON in the body.
The content-type header must be <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p>
<p>A simple example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>POST http://build.example.org/api/v2/scheduler/4
--&gt; {&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;force&quot;,
     &quot;params&quot;: {&quot;revision&quot;: &quot;abcd&quot;, &quot;branch&quot;: &quot;dev&quot;},
     &quot;id&quot;: 843}
&lt;-- {&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: {&quot;buildsetid&quot;: 44}, &quot;id&quot;: 843}
</pre></div>
</div>
</div>
<div class="section" id="authentication">
<h2><a class="toc-backref" href="#id11">Authentication</a><a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>Authentication to the REST API is performed in the same manner as authentication to the main web interface.  Once credentials have been established, a cookie will be set, which must be sent to the buildbot REST API with every request thereafter.  For those buildbot instances using OAuth2 authentication providers, access tokens can be used for automated access.  For example, GitHub’s personal access tokens can be used to access the buildbot as a github user without needing to store the username and password of the user.  To use an OAuth2 access token, send a <cite>GET</cite> request to the <cite>/auth/login</cite> with the <cite>token</cite> URL parameter set to the access token that the OAuth2 provider has given you.  A <cite>python</cite> example using <cite>requests</cite> is shown below, where we first authenticate with our OAuth2 access token, and then are able to request otherwise shielded endpoints:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://&lt;buildbot_url&gt;/auth/login&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">OAUTH_TOKEN</span><span class="p">})</span>
<span class="n">builders</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://&lt;buildbot_url&gt;/api/v2/builders&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, junpengxu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>