

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development Quick-start &mdash; buildbot-translate 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> buildbot-translate
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">1. Buildbot Tutorial</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">buildbot-translate</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Development Quick-start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="development-quick-start">
<h1>Development Quick-start<a class="headerlink" href="#development-quick-start" title="Permalink to this headline">¶</a></h1>
<p>Buildbot is a python based application.
It tries very hard to follow the python best practices, and to make is easy to dive into the code.</p>
<p>In order to develop Buildbot you need just a python environment and possibly some native packages in stripped-down setups.
The most up to date list in the docker file we use to manage our CI (<a class="reference external" href="https://github.com/buildbot/metabbotcfg/blob/nine/docker/metaworker/Dockerfile">MetaBBotDockerFile</a>).</p>
<p>If you are completely new to python, the best is to first follow the tutorials that would come when you type “python virtualenv for dummies” in your favorite search engine.</p>
<div class="section" id="create-a-buildbot-python-environment">
<span id="pythondevquickstart"></span><h2>Create a Buildbot Python Environment<a class="headerlink" href="#create-a-buildbot-python-environment" title="Permalink to this headline">¶</a></h2>
<p>Buildbot uses Twisted <a class="reference external" href="http://twistedmatrix.com/trac/wiki/TwistedTrial">trial</a> to run its test suite.</p>
<p>Following is a quick shell session to put you on the right track, including running the test suite.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># the usual buildbot development bootstrap with git and virtualenv</span>
git clone https://github.com/buildbot/buildbot
<span class="nb">cd</span> buildbot

<span class="c1"># run a helper script which creates the virtualenv for development.</span>
<span class="c1"># Virtualenv allows to install python packages without affecting</span>
<span class="c1"># other parts of the system</span>
make virtualenv

<span class="c1"># Activate the virtualenv.</span>
<span class="c1"># After this you should see (.venv) in your shell prompt</span>
. .venv/bin/activate

<span class="c1"># now we run the test suite</span>
trial buildbot

<span class="c1"># using all CPU cores within the system helps to speed everything up</span>
trial -j16 buildbot

<span class="c1"># find all tests that talk about mail</span>
trial -n --reporter<span class="o">=</span>bwverbose buildbot <span class="p">|</span> grep mail

<span class="c1"># run only one test module</span>
trial buildbot.test.unit.test_reporters_mail

<span class="c1"># you can also skip the virtualenv activation using make</span>
make trial

<span class="c1"># and pass options using TRIALOPTS</span>
make trial <span class="nv">TRIALOPTS</span><span class="o">=</span><span class="s1">&#39;-j16 buildbot&#39;</span>

<span class="c1"># or test with a specific Python version</span>
make trial <span class="nv">VENV_PY_VERSION</span><span class="o">=</span>/usr/local/bin/python3
</pre></div>
</div>
</div>
<div class="section" id="create-a-javascript-frontend-environment">
<h2>Create a JavaScript Frontend Environment<a class="headerlink" href="#create-a-javascript-frontend-environment" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to get set up quickly to hack on the JavaScript UI.
It does not assume familiarity with Python, although a Python installation is required, as well as <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>.
You will also need <code class="docutils literal notranslate"><span class="pre">NodeJS</span></code>, and <code class="docutils literal notranslate"><span class="pre">yarn</span></code> installed.</p>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Buildbot UI requires at least node 4 or newer and yarn.</p>
</div>
<ul>
<li><p>Install LTS release of node.js.</p>
<p><a class="reference external" href="http://nodejs.org/">http://nodejs.org/</a> is a good start for Windows and OSX.</p>
<p>For modern Linux distributions you can often simply install distribution-provided node version, if it’s recent enough.
You can use yarn from the same source.
The below method has been tested on Ubuntu 18.04 and should work on recent enough Debian.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install nodejs yarn
</pre></div>
</div>
<p>In other cases, use <a class="reference external" href="https://deb.nodesource.com">https://deb.nodesource.com</a>.</p>
</li>
</ul>
</div>
<div class="section" id="hacking-the-buildbot-javascript">
<span id="jsdevquickstart"></span><h3>Hacking the Buildbot JavaScript<a class="headerlink" href="#hacking-the-buildbot-javascript" title="Permalink to this headline">¶</a></h3>
<p>To effectively develop Buildbot JavaScript, you’ll need a running Buildmaster, configured to operate out of the source directory.</p>
<p>Follow <a class="reference internal" href="#pythondevquickstart"><span class="std std-ref">Create a Buildbot Python Environment</span></a> as a prerequisite.</p>
<p>This should have created and enabled virtualenv Python environment.</p>
<p>Next, install the Buildbot-WWW and Buildbot python packages using <code class="docutils literal notranslate"><span class="pre">--editable</span></code> mode, which means that they should execute from the source directory.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make frontend
</pre></div>
</div>
<p>This will fetch a number of python dependencies from pypi, the Python package repository and also a number of node.js dependencies that are used for building the web application.
Then the actual frontend code will be built with artifacts stored in the source directory, e.g. <code class="docutils literal notranslate"><span class="pre">www/base/buildbot_www/static</span></code>.
Finally, the built python packages will be installed to virtualenv environment as <code class="docutils literal notranslate"><span class="pre">--editable</span></code> packages.
This means that the webserver will load resources from <code class="docutils literal notranslate"><span class="pre">www/base/buildbot_www/static</span></code>.</p>
<p>Now you’ll need to create a master instance.
For a bit more detail, see the Buildbot tutorial (<a class="reference internal" href="../tutorial/firstrun.html#first-run-label"><span class="std std-ref">第一次启动</span></a>).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir test-master
buildbot create-master test-master
mv test-master/master.cfg.sample test-master/master.cfg
buildbot start test-master
</pre></div>
</div>
<p>If all goes well, the master will start up and begin running in the background.
During <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">frontend</span></code> the www frontend was built using production mode, so everything is minified and hard to debug.
However, the frontend was installed as a editable python package, so all changes in the artifacts (e.g. <code class="docutils literal notranslate"><span class="pre">www/base/buildbot_www/static</span></code>) in the source directories will be observed in the browser.
Thus we can rebuild the JavaScript resources manually using development settings, so they are not minified and easier to debug.</p>
<p>This can be done by running the following in e.g. <code class="docutils literal notranslate"><span class="pre">www/base</span></code> directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>yarn run build-dev
</pre></div>
</div>
<p>The above rebuilds the resources only once, after each change you need to refresh the built resources.
The actual commands that are ran are stored in the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file under the <code class="docutils literal notranslate"><span class="pre">scripts</span></code> key.</p>
<p>To avoid the need to type the above command after each change, you can use the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>yarn run dev
</pre></div>
</div>
<p>This will watch files for changes and reload automatically.</p>
<p>To run unit tests, do the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>yarn run test
</pre></div>
</div>
<p>To run unit tests within all frontend packages within Buildbot, do the following at the root of the project:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make frontend_tests
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You need to have Chrome-based browser installed in order to run unit tests in the default configuration.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, junpengxu

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>